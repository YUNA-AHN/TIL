<html>
  <head></head>
  <body>
    <script>
      const person = {
        name: "john",
        age: 20,
        city: "Gumi",
        grades: [100, 100, 100, 98],
      };

      // 객체를 깊은복사로 진행 (Object -> JSON -> Object)
      // const person2 = JSON.parse(JSON.stringify(person));
      // 직접 코드로 deepcopy 함수 15배 정도..!

      // 원시 타입임을 체크하는 함수
      function isPrimitive(value) {
        return typeof value !== "object" || value === null;
      }

      // 재귀형태로 데이터를 순회하면서 복사를 수행하는 함수
      function deepcopy(obj) {
        // 1. 원시 타입의 값이라면 즉시 반환
        if (isPrimitive(obj)) {
          // console.log(obj);
          return obj;
        }
        // object 타입인데, Array or Object
        new_obj = Array.isArray(obj) ? [] : {};
        // 해당 속성을 모두 반복하며 복사 진행
        for (key in obj) {
          value = obj[key];
          new_obj[key] = isPrimitive(value) ? value : deepcopy(value);
        }
        // console.log(new_obj);
        return new_obj;
      }

      clone_person = deepcopy(person);

      console.log(person);
      console.log(clone_person);

      // clone_person.grades[3] = 30;
      // console.log("person", person);
      // console.log("clone_person", clone_person);
    </script>
  </body>
</html>
